<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="utf-8">
	<meta name="robots" content="all">
	<meta name="author" content="github.com/BurningJump">
	<link rel="stylesheet" type="text/css" href="editOnlineStyle.css">
	<title>在线编辑器</title>
</head>
<body id="editor">
	<div id="wrapper">
		<form action="replace.html" method="post" id="tryitform" name="tryitform" onsubmit="validateForm();" target="i">
			<div id="butt">
				<input type="button" value="提交代码" onclick="submitTryit()">
			</div>
			<div id="CodeArea">
			<h2>编辑您的代码：</h2>
			<!-- 为保持页面布局，请勿修改textarea缩进 -->
			<textarea id="TestCode" wrap="logical">&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
    function replaceDoc() {
        window.location.replace("http://www.w3school.com.cn")
    }
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;input type="button" value="Replace document" onclick="replaceDoc()"&gt;
&lt;/body&gt;
&lt;/html&gt;
			</textarea>
			</div>
			<input type="hidden" id="code" name="code">
			<input type="hidden" id="bt" name="bt">
		</form>
		<div id="result">
			<h2>查看结果:</h2>
			<iframe frameborder="0" name="i" src="replace.html"></iframe>
		</div>
	</div>

	<script type="text/javascript">
		function submitTryit() {
			var t=document.getElementById("TestCode").value;
			t=t.replace(/=/gi,"w3equalsign");
			t=t.replace(/script/gi,"w3scrw3ipttag");
			document.getElementById("code").value=t;
			document.getElementById("tryitform").action="replace.html";
			validateForm();
			document.getElementById("tryitform").submit();
		}

		function validateForm() {
			var code=document.getElementById("code").value;
			if (code.length>5000) {
				document.getElementById("code").value="<h1>Error</h1>";
			}
		}
	</script>
</body>
</html>